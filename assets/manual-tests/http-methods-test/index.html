<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP Method Detection Test - JS Recon Buddy</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 0 20px;
            background: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        h2 {
            color: #34495e;
            margin-top: 30px;
        }

        .test-section {
            background: #f8f9fa;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
            border-radius: 4px;
        }

        .expected {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 20px 0;
        }

        code {
            background: #ecf0f1;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .method {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 0.85em;
            margin-right: 5px;
        }

        .get {
            background: #4caf50;
            color: white;
        }

        .post {
            background: #2196f3;
            color: white;
        }

        .put {
            background: #ff9800;
            color: white;
        }

        .delete {
            background: #f44336;
            color: white;
        }

        .patch {
            background: #9c27b0;
            color: white;
        }

        ul {
            line-height: 1.8;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>HTTP Method Detection Test Page</h1>
        <p>This page tests the HTTP method detection feature in JS Recon Buddy.</p>

        <div class="expected">
            <h3>Expected Results</h3>
            <p>After running <strong>"Analyze Full Page"</strong>, you should see these endpoints with methods:</p>
            <ul>
                <li><span class="method post">POST</span> <code>/api/users</code></li>
                <li><span class="method post">POST</span> <code>/api/login</code></li>
                <li><span class="method get">GET</span> <code>/api/users</code></li>
                <li><span class="method get">GET</span> <code>/api/products</code></li>
                <li><span class="method get">GET</span> <code>/data/export</code></li>
                <li><span class="method put">PUT</span> <code>/api/users/123</code></li>
                <li><span class="method put">PUT</span> <code>/api/users/update</code></li>
                <li><span class="method delete">DELETE</span> <code>/api/orders/456</code></li>
                <li><span class="method patch">PATCH</span> <code>/api/profile</code></li>
                <li><code>/static/logo.png</code> (no method - bare URL)</li>
            </ul>
        </div>

        <h2>Test Patterns</h2>

        <div class="test-section">
            <h3>Pattern 1: fetch() with explicit method</h3>
            <p>Should detect the HTTP method from the options object</p>
        </div>

        <div class="test-section">
            <h3>Pattern 2: axios method calls</h3>
            <p>Should detect methods from axios.get(), axios.post(), etc.</p>
        </div>

        <div class="test-section">
            <h3>Pattern 3: Generic HTTP client</h3>
            <p>Should detect methods from generic .get(), .post() patterns</p>
        </div>

        <div class="test-section">
            <h3>Pattern 4: XMLHttpRequest</h3>
            <p>Should detect method from xhr.open() calls</p>
        </div>

        <div class="test-section">
            <h3>Pattern 5: Bare URLs</h3>
            <p>Should still detect endpoints without methods (backward compatibility)</p>
        </div>
    </div>

    <!-- fetch() with explicit method -->
    <script>
        async function createUser() {
            const response = await fetch('/api/users', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: 'John' })
            });
            return response.json();
        }
    </script>

    <!-- axios method calls -->
    <script>
        const axios = {
            get: (url) => axios.get('/api/products'),

            post: (url) => axios.post('/api/users'),

            delete: (url) => axios.delete('/api/orders/456')
        };
    </script>

    <!-- Generic HTTP client -->
    <script>
        const client = {
            update: () => client.put('/api/users/123'),

            modify: () => client.patch('/api/profile')
        };

        const request = {
            fetchProducts: () => request.get('/api/products')
        };
    </script>

    <!-- XMLHttpRequest -->
    <script>
        function loadData() {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', '/data/export');
            xhr.send();
        }
    </script>

    <!-- Bare URLs -->
    <script>
        const logoPath = '/static/logo.png';
        const imageSrc = "/images/header.jpg";
    </script>

    <!-- Additional patterns -->
    <script>
        const apiConfig = {
            login: () => fetch('/api/auth/login', { method: 'POST' })
        };

        class ApiService {
            async getUsers() {
                return await axios.get('/api/users');
            }

            async updateUser(id) {
                return await axios.put('/api/users/update');
            }
        }
    </script>

    <script>
        fetch('/api/default');

        const redirectUrl = '/redirect-target';
        window.API_ENDPOINT = '/configured-endpoint';
    </script>

</body>

</html>
